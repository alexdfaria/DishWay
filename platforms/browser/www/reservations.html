<!DOCTYPE HTML>
<html lang="en">

<!-- Mirrored from www.enableds.com/products/stickymobile3/page-20-event-2.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 17 Feb 2020 22:23:26 GMT -->
<!-- Added by HTTrack -->
<meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport"
        content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover" />
    <title>StickyMobile</title>
    <link
        href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i,900,900i|Source+Sans+Pro:300,300i,400,400i,600,600i,700,700i,900,900i&amp;display=swap"
        rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="styles/framework.css">
    <link rel="stylesheet" type="text/css" href="fonts/css/fontawesome-all.min.css">

    <link rel="manifest" href="_manifest.json" data-pwa-version="set_by_pwa.html">
    <link rel="apple-touch-icon" sizes="180x180" href="app/icons/icon-192x192.png">
</head>

<body class="theme-light" data-background="none" data-highlight="red2">
    <div id="page">
        <div id="page-preloader">
            <div class="loader-main">
                <div class="preload-spinner border-highlight"></div>
            </div>
        </div>
        <div class="header header-fixed header-logo-center">
            <a href="index.html" class="header-title">Sticky Mobile</a>
            <a href="#" class="back-button header-icon header-icon-1"><i class="fas fa-arrow-left"></i></a>
            <a href="#" data-toggle-theme-switch class="header-icon header-icon-4"><i class="fas fa-lightbulb"></i></a>
        </div>
        <div id="footer-menu" class="footer-menu-5-icons footer-menu-style-1">
            <a href="index.html"><i class="fa fa-home"></i><span>Home</span></a>
            <a href="index-components.html"><i class="fa fa-star"></i><span>Features</span></a>
            <a href="index-pages.html" class="active-nav"><i class="fa fa-heart"></i><span>Pages</span></a>
            <a href="index-search.html"><i class="fa fa-search"></i><span>Search</span></a>
            <a href="#" data-menu="menu-settings"><i class="fa fa-cog"></i><span>Settings</span></a>
            <div class="clear"></div>
        </div>
        <div class="page-content header-clear-large" id="reservations">
        </div>

        <div class="menu-hider"></div>
        <div id="menu-success" class="menu menu-box-modal round-medium bg-green1-dark shadow-large"
            data-menu-height="320" data-menu-width="310" data-menu-effect="menu-over">
            <h1 class="center-text top-30"><i class="fa fa-3x fa-check-circle color-white"></i></h1>
            <h1 class="center-text uppercase ultrabold top-30 color-white">Reservation cancelled</h1>
            <p class="boxed-text-large color-white">
                Your reservation has now been canceled
            </p>
            <a href="main.html" id="ok"
                class="close-menu button button-center-medium button-s button-round-small bg-white color-black">OK!</a>
        </div>
        <div id="menu-warning" class="menu menu-box-modal round-medium bg-red2-dark shadow-large" data-menu-height="320"
            data-menu-width="310" data-menu-effect="menu-over">
            <h1 class="center-text top-30"><i class="fa fa-3x fa-times color-white"></i></h1>
            <h1 class="center-text uppercase ultrabold top-30 color-white">Wooops!</h1>
            <p class="boxed-text-large color-white" id="error">

            </p>
            <a href=""
                class="close-menu button button-center-medium button-s button-round-small bg-white color-black">Go
                Back</a>
        </div>
    </div>
    <script type="text/javascript" src="scripts/jquery.js"></script>
    <script type="text/javascript" src="scripts/plugins.js"></script>
    <script type="text/javascript" src="scripts/custom.js"></script>
    <script>
        $(document).ready(function () {
            var storage = window.localStorage;


            $.ajax({
                type: "get",
                url: "http://127.0.0.1:3001/api/reservations/user",
                data: {
                    "user_id": storage.user_id,
                },
                dataType: "json",
                success: function (response) {
                    for (let i = 0; i < response.length; i++) {
                        $("#reservations").append(` <div class="content-boxed content-boxed-full" >
                            <div style="margin-bottom: 10px;"></div>
                            <div class="content bottom-10">
                                <div class="float-left">
                                    <h1 class="bolder">` + response[i].restaurant_name + `</h1>
                                    <p class="font-10 under-heading bottom-15"><i
                                            class="fa fa-map-marker-alt right-10"></i>` + response[i]
                            .restaurant_address +
                            `
                                    </p>
                                </div>
                                <a href="#"
                                    class="button button-xs bg-highlight round-huge shadow-huge float-right font-11">View
                                    restaurant</a>
                                <div class="divider clear bottom-15"></div>
                                <div class="one-half">
                                    <strong class="color-theme">Date:</strong>
                                    <p class="font-12 bottom-15"><i class="far fa-calendar right-5"></i>15 August 2025
                                    </p>
                                </div>
                                <div class="one-half last-column">
                                    <strong class="color-theme">Time:</strong>
                                    <p class="font-12 bottom-15"><i class="far fa-clock right-5"></i>` + response[i]
                            .time + `</p>
                                </div>
                                <div class="clear"></div>
                                <strong class="color-theme">Description</strong>
                                <p>
                                    Are you a fan of paintball? Then this is the even for you! Join today and you get
                                    free gear for
                                    the duration of the event.
                                    Protection required for all visitors that plan on walking the course.
                                </p>
                                <div class="user-group">
                                    <div class="user-group-manager border-highlight">
                                        <img class="shadow-large" src="images/pictures/faces/4s.png" alt="img">
                                        <h4 class="color-theme">` + storage.user_name + `</h4>
                                        <em class="color-highlight">Event Creator</em>
                                    </div>
                                    <div class="user-group-title">
                                        <h5 class="color-theme bolder bottom-0">This reservation has ` +
                            response[i].number_guests + ` guests</h5>
                                        <p class="under-heading font-10 color-highlight bottom-15">John, Jack, Jason and
                                            Joe and 16
                                            others</p>
                                    </div>
                                    <div class="user-group-users">
                                        <img class="shadow-large" src="images/pictures/faces/2s.png">
                                        <div class="clear"></div>
                                    </div>
                                    <div class="clear"></div>
                                </div>
                                <span href="#" id="button" restaurant_id = "` + response[i]._id + `" 
                                    class="delete button button-s button-full round-small shadow-huge bg-highlight">Cancel Reservation</span>
                                    <div class="preload-spinner2 border-highlight" id="loader"></div>

                            </div>
                        </div>`)
                    }

                    $("#loader").hide();
                    $(".delete")
                        .on("click", function () {

                            $("#button").hide();
                            $("#loader").show();
                            $.ajax({
                                type: "delete",
                                url: "http://127.0.0.1:3001/api/reservations/delete",
                                data: {
                                    "_id": $(this).attr("restaurant_id")
                                },
                                dataType: "json",
                                success: function (response) {
                                    $("#loader").hide();
                                    $("#menu-success").addClass("menu-active");
                                    $("#ok").click(function (e) {
                                        e.preventDefault();
                                        location.reload();
                                    });
                                },
                                error: function (response) {
                                    $("#loader").hide();
                                    $("#button").show();
                                    $("#menu-warning").addClass("menu-active");
                                    $("#error").text(response.responseText);
                                }
                            });
                        });
                }
            });
        });
    </script>
</body>